<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CADALOC Project Archive</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Import Gaussian Splat Renderer -->
    <script type="module">
        import { Renderer } from "https://antimatter15.com/splat/splat.js";

        document.addEventListener("DOMContentLoaded", () => {
            const viewer1 = new Renderer();
            document.getElementById("viewer1").appendChild(viewer1.canvas);
            viewer1.load("https://services.phaidra.univie.ac.at/api/object/o:2118793/download");

            const viewer2 = new Renderer();
            document.getElementById("viewer2").appendChild(viewer2.canvas);
            viewer2.load("https://services.phaidra.univie.ac.at/api/object/o:2118794/download");
        });
    </script>

    <script>
        async function fetchMetadata(pid, titleId, descriptionId, downloadId) {
            const apiUrl = `https://services.phaidra.univie.ac.at/api/object/${pid}/metadata`;
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();

                // Extract title, description, and download link
                const title = data['dce:title']?.[0]?.['value'] || 'No title available';
                const description = data['dcterms:description']?.[0]?.['value'] || 'No description available';
                const downloadLink = `https://services.phaidra.univie.ac.at/api/object/${pid}/download`;

                document.getElementById(titleId).innerText = title;
                document.getElementById(descriptionId).innerText = description;
                document.getElementById(downloadId).href = downloadLink;
                document.getElementById(downloadId).innerText = 'Download Model';
            } catch (error) {
                console.error('Error fetching metadata:', error);
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            // Fetch metadata for all models
            fetchMetadata("2118793", "title1", "description1", "download1");
            fetchMetadata("2118794", "title2", "description2", "download2");
        });
    </script>

    <style>
        body { margin: 0; font-family: 'Inter', sans-serif; background: #f4f4f4; color: #333; }
        .header { padding: 20px; background: #0073e6; color: white; text-align: center; }
        .title { font-size: 36px; font-weight: 600; }
        .content { max-width: 900px; margin: 40px auto; padding: 20px; background: #fff; border-radius: 10px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }
        .section { margin: 30px 0; }
        .section h2 { border-bottom: 2px solid #0073e6; padding-bottom: 5px; }
        .link { color: #0073e6; text-decoration: none; font-weight: 600; }
        .link:hover { text-decoration: underline; }
        .viewer-container, .mesh-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 20px; }
        .model-info { text-align: center; margin-top: 10px; }
        .model-title { font-weight: 600; }
        .model-description { margin: 5px 0; }
        canvas { width: 100%; max-width: 300px; height: auto; border-radius: 8px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">CADALOC â€“ archaeothanatologiCAl re-evaluation of the burial in the roman flag sanctuary (aeDes) of Augustianis at the Later tOwn parish church's Crypt (traismauer/austria)</h1>
    </div>
    <div class="content">
        <div class="section">
            <h2>About the Project</h2>
            <p>CADALOC stands as acronym for <strong>archaeothanatologiCAl re-evaluation of the burial in the roman flag sanctuary (aeDes) of Augustianis at the Later tOwn parish church's Crypt (traismauer/austria)</strong>. The project investigates a burial found in the crypt of the town parish church of Traismauer (Austria). It applies archaeothanatological, anthropological, archaeogenetic, and radiocarbon dating methods to re-evaluate previous findings and enhance our understanding of the historical context.</p>
        <p>This website serves as an interactive landing page for the CADALOC project, providing streamlined access to research findings.</p>
        </div>

        <div class="section">
            <h2>Publications</h2>
            <p><a href="finalPapers.html" class="link">View Final Papers (work in progress)</a></p>
        </div>

        <div class="section">
            <h2>Research and Data</h2>
            <p>All research data is archived in the long-term repository Phaidra.</p>
            <p><a href="https://phaidra.univie.ac.at/" class="link" target="_blank">Access the archived datasets on Phaidra</a></p>
        </div>

        <div class="section">
            <h2>3D Gaussian Splat Viewer</h2>
            <div class="viewer-container">
                <div id="viewer1" class="viewer"></div>
                <div class="model-info">
                    <div class="model-title" id="title1"></div>
                    <div class="model-description" id="description1"></div>
                    <a id="download1" class="link" target="_blank">Download Model</a>
                </div>
                <div id="viewer2" class="viewer"></div>
                <div class="model-info">
                    <div class="model-title" id="title2"></div>
                    <div class="model-description" id="description2"></div>
                    <a id="download2" class="link" target="_blank">Download Model</a>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Textured 3D Models</h2>
            <div class="mesh-container">
                <div>
                    <div id="mesh1" class="mesh"></div>
                    <div class="model-info">
                        <div class="model-title" id="title1"></div>
                        <div class="model-description" id="description1"></div>
                        <a id="download1" class="link" target="_blank"></a>
                    </div>
                </div>
                <div id="mesh2" class="mesh"></div>
                <div id="mesh3" class="mesh"></div>
                <div id="mesh4" class="mesh"></div>
                <div id="mesh5" class="mesh"></div>
                <div id="mesh6" class="mesh"></div>
            </div>
        </div>
    </div>

    <script>
        // Load metadata for additional models
        fetchMetadata("2118794", "title2", "description2", "download2");
    </script>

    <!-- Include Three.js and necessary components -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
     <script>
        function loadModel(containerId, modelUrl) {
            const container = document.getElementById(containerId);
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(300, 300);
            container.appendChild(renderer.domElement);

            const loader = new THREE.GLTFLoader();
            loader.load(modelUrl, function (gltf) {
                scene.add(gltf.scene);
                camera.position.z = 2;
                const controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;

                function animate() {
                    requestAnimationFrame(animate);
                    controls.update();
                    renderer.render(scene, camera);
                }
                animate();
            });
        }

        // Load models from Phaidra
        loadModel("mesh1", "https://services.phaidra.univie.ac.at/api/object/o:2118793/download");
        loadModel("mesh2", "https://services.phaidra.univie.ac.at/api/object/o:2118794/download");
    </script>
</body>
</html>
